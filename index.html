<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ENFOCADOS â€” Plataforma de EvaluaciÃ³n</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;1,9..40,300&display=swap" rel="stylesheet" />

  <style>
    /* â”€â”€ TOKENS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    :root {
      --bg:          #0a0c10;
      --surface:     #12151c;
      --surface2:    #1c2030;
      --border:      rgba(255,255,255,.07);
      --accent:      #00e5a0;
      --accent2:     #0099ff;
      --danger:      #ff4d6d;
      --text:        #e8eaf0;
      --text-muted:  #6b7280;
      --radius:      14px;
      --glow:        0 0 40px rgba(0,229,160,.15);
    }

    /* â”€â”€ RESET â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'DM Sans', sans-serif;
      font-size: 15px;
      line-height: 1.6;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* â”€â”€ FONDO ANIMADO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .bg-grid {
      position: fixed; inset: 0; z-index: 0;
      background-image:
        linear-gradient(rgba(0,229,160,.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0,229,160,.03) 1px, transparent 1px);
      background-size: 48px 48px;
      pointer-events: none;
    }
    .bg-blob {
      position: fixed; z-index: 0; border-radius: 50%;
      filter: blur(90px); pointer-events: none; opacity: .4;
    }
    .bg-blob.a {
      width: 500px; height: 500px;
      background: radial-gradient(circle, rgba(0,229,160,.2), transparent 70%);
      top: -150px; left: -100px;
      animation: drift 18s ease-in-out infinite alternate;
    }
    .bg-blob.b {
      width: 400px; height: 400px;
      background: radial-gradient(circle, rgba(0,153,255,.18), transparent 70%);
      bottom: -100px; right: -80px;
      animation: drift 24s ease-in-out infinite alternate-reverse;
    }
    @keyframes drift {
      from { transform: translate(0, 0) scale(1); }
      to   { transform: translate(30px, 20px) scale(1.08); }
    }

    /* â”€â”€ LAYOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .page { position: relative; z-index: 1; flex: 1; display: flex; flex-direction: column; }

    header {
      padding: 24px 40px;
      display: flex;
      align-items: center;
      gap: 14px;
      border-bottom: 1px solid var(--border);
      backdrop-filter: blur(12px);
    }
    .logo-mark {
      width: 38px; height: 38px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border-radius: 10px;
      display: grid; place-items: center;
      font-family: 'Syne', sans-serif;
      font-weight: 800; font-size: 18px;
      color: #0a0c10;
    }
    .logo-text { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 18px; letter-spacing: .5px; }
    .logo-text span { color: var(--accent); }

    main {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
    }

    /* â”€â”€ VISTAS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .view { display: none; width: 100%; max-width: 440px; }
    .view.active { display: block; animation: fadeUp .45s ease forwards; }
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* â”€â”€ CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 40px 36px;
      box-shadow: 0 8px 48px rgba(0,0,0,.4), var(--glow);
    }
    .card-title {
      font-family: 'Syne', sans-serif;
      font-size: 26px; font-weight: 800;
      margin-bottom: 6px;
      background: linear-gradient(90deg, var(--text) 40%, var(--text-muted));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }
    .card-subtitle { color: var(--text-muted); font-size: 14px; margin-bottom: 32px; }

    /* â”€â”€ FORM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .field { margin-bottom: 20px; }
    .field label {
      display: block; font-size: 13px; font-weight: 500;
      color: var(--text-muted); margin-bottom: 7px; letter-spacing: .4px;
    }
    .field input {
      width: 100%;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      color: var(--text);
      font-family: 'DM Sans', sans-serif;
      font-size: 15px;
      padding: 13px 16px;
      outline: none;
      transition: border-color .2s, box-shadow .2s;
    }
    .field input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(0,229,160,.12);
    }
    .field input::placeholder { color: #3d4455; }

    /* â”€â”€ BUTTON â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .btn {
      width: 100%; padding: 14px;
      border: none; border-radius: var(--radius);
      font-family: 'Syne', sans-serif;
      font-size: 15px; font-weight: 700;
      letter-spacing: .5px;
      cursor: pointer;
      transition: opacity .2s, transform .15s, box-shadow .2s;
      position: relative; overflow: hidden;
    }
    .btn-primary {
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent2) 100%);
      color: #0a0c10;
      box-shadow: 0 4px 20px rgba(0,229,160,.3);
    }
    .btn-primary:hover { opacity: .9; transform: translateY(-1px); box-shadow: 0 8px 28px rgba(0,229,160,.4); }
    .btn-primary:active { transform: translateY(0); }
    .btn:disabled { opacity: .5; cursor: not-allowed; transform: none !important; }

    /* â”€â”€ ALERT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .alert {
      border-radius: var(--radius);
      padding: 12px 16px;
      font-size: 13.5px;
      margin-bottom: 20px;
      display: none;
    }
    .alert.show { display: block; }
    .alert-error { background: rgba(255,77,109,.1); border: 1px solid rgba(255,77,109,.3); color: #ff8fa3; }
    .alert-info  { background: rgba(0,229,160,.08); border: 1px solid rgba(0,229,160,.2); color: var(--accent); }

    /* â”€â”€ SPINNER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .spinner {
      width: 18px; height: 18px;
      border: 2px solid rgba(0,0,0,.3);
      border-top-color: #0a0c10;
      border-radius: 50%;
      animation: spin .7s linear infinite;
      display: inline-block; vertical-align: middle; margin-right: 8px;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* â”€â”€ DASHBOARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #view-dashboard { max-width: 900px; }

    .dash-header {
      display: flex; align-items: center; justify-content: space-between;
      margin-bottom: 32px; flex-wrap: wrap; gap: 12px;
    }
    .dash-welcome { font-family: 'Syne', sans-serif; font-size: 22px; font-weight: 700; }
    .dash-welcome span { color: var(--accent); }

    .btn-sm {
      padding: 9px 20px; font-size: 13px; width: auto;
      background: var(--surface2); color: var(--text-muted);
      border: 1px solid var(--border);
    }
    .btn-sm:hover { color: var(--text); border-color: rgba(255,255,255,.2); }

    /* EstadÃ­sticas */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 16px; margin-bottom: 32px;
    }
    .stat-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      text-align: center;
    }
    .stat-value { font-family: 'Syne', sans-serif; font-size: 32px; font-weight: 800; color: var(--accent); }
    .stat-label { font-size: 12px; color: var(--text-muted); margin-top: 4px; letter-spacing: .5px; text-transform: uppercase; }

    /* Tabla de preguntas */
    .section-title {
      font-family: 'Syne', sans-serif; font-size: 16px; font-weight: 700;
      margin-bottom: 16px; color: var(--text-muted); letter-spacing: .5px; text-transform: uppercase;
    }
    .table-wrap {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden; overflow-x: auto;
    }
    table { width: 100%; border-collapse: collapse; font-size: 13.5px; }
    thead tr { background: var(--surface2); }
    th {
      padding: 13px 16px; text-align: left;
      color: var(--text-muted); font-weight: 600;
      font-size: 11px; letter-spacing: .8px; text-transform: uppercase;
      border-bottom: 1px solid var(--border);
    }
    td {
      padding: 13px 16px;
      border-bottom: 1px solid var(--border);
      color: var(--text); vertical-align: top;
      max-width: 280px;
    }
    tbody tr:last-child td { border-bottom: none; }
    tbody tr:hover td { background: rgba(255,255,255,.02); }
    .badge {
      display: inline-block; padding: 3px 10px; border-radius: 20px;
      font-size: 11px; font-weight: 600; letter-spacing: .4px;
      background: rgba(0,229,160,.12); color: var(--accent); border: 1px solid rgba(0,229,160,.2);
    }

    /* â”€â”€ LOADING SCREEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .loading-screen {
      text-align: center; padding: 60px 20px;
    }
    .loading-icon { font-size: 48px; margin-bottom: 16px; }
    .loading-msg { color: var(--text-muted); font-size: 14px; }

    /* â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media (max-width: 600px) {
      header { padding: 16px 20px; }
      .card  { padding: 28px 22px; border-radius: 16px; }
    }
  </style>
</head>

<body>
  <div class="bg-grid"></div>
  <div class="bg-blob a"></div>
  <div class="bg-blob b"></div>

  <div class="page">
    <!-- HEADER -->
    <header>
      <div class="logo-mark">E</div>
      <div class="logo-text"><span>ENFO</span>CADOS</div>
    </header>

    <main>

      <!-- â”€â”€ VISTA: LOGIN â”€â”€ -->
      <div id="view-login" class="view active">
        <div class="card">
          <div class="card-title">Bienvenido</div>
          <div class="card-subtitle">Accede con tu correo institucional para continuar.</div>

          <div id="login-alert" class="alert alert-error"></div>
          <div id="login-info"  class="alert alert-info"></div>

          <form id="login-form" onsubmit="handleLogin(event)">
            <div class="field">
              <label for="email">Correo electrÃ³nico</label>
              <input type="email" id="email" placeholder="tu@correo.com" required autocomplete="email" />
            </div>
            <button type="submit" id="login-btn" class="btn btn-primary">
              Ingresar a la plataforma
            </button>
          </form>
        </div>
      </div>

      <!-- â”€â”€ VISTA: CARGANDO â”€â”€ -->
      <div id="view-loading" class="view">
        <div class="loading-screen">
          <div class="loading-icon">âš¡</div>
          <p id="loading-text" style="font-family:'Syne',sans-serif;font-size:18px;font-weight:700;margin-bottom:8px;">Cargando datosâ€¦</p>
          <p class="loading-msg">Conectando con la base de datos, un momento.</p>
        </div>
      </div>

      <!-- â”€â”€ VISTA: DASHBOARD â”€â”€ -->
      <div id="view-dashboard" class="view">
        <div class="dash-header">
          <div>
            <div class="dash-welcome">Hola, <span id="user-name">â€”</span> ðŸ‘‹</div>
            <div style="color:var(--text-muted);font-size:13px;margin-top:2px;" id="user-email-display"></div>
          </div>
          <button class="btn btn-sm" onclick="logout()">Cerrar sesiÃ³n</button>
        </div>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value" id="stat-questions">â€”</div>
            <div class="stat-label">Preguntas cargadas</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="stat-users">â€”</div>
            <div class="stat-label">Alumnos activos</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="stat-status">âœ“</div>
            <div class="stat-label">Estado conexiÃ³n</div>
          </div>
        </div>

        <div class="section-title">Vista previa â€” Banco de preguntas</div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr id="questions-head"></tr>
            </thead>
            <tbody id="questions-body"></tbody>
          </table>
        </div>
      </div>

    </main>
  </div>

  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ JAVASCRIPT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <script>
    // â”€â”€ CONFIGURACIÃ“N â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const GAS_URL = "https://script.google.com/macros/s/AKfycbw9MQnIJS-S0TEvukVEeHPAm11lKca1-c6BuT4V7ZqMr1X93m7P7Q5izKlXiSyrdHIz/exec";
    const MAX_PREVIEW_ROWS = 20;   // filas a mostrar en la tabla
    const JSONP_TIMEOUT    = 15000; // ms

    // â”€â”€ ESTADO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    let currentUser  = null;
    let allUsers     = [];
    let allQuestions = [];

    // â”€â”€ UTILIDADES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function showView(id) {
      document.querySelectorAll(".view").forEach(v => v.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    function setAlert(elId, msg, show = true) {
      const el = document.getElementById(elId);
      el.textContent = msg;
      el.classList.toggle("show", show);
    }

    function setLoginLoading(loading) {
      const btn = document.getElementById("login-btn");
      btn.disabled = loading;
      btn.innerHTML = loading
        ? '<span class="spinner"></span>Verificandoâ€¦'
        : "Ingresar a la plataforma";
    }

    // â”€â”€ JSONP HELPER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function jsonp(type) {
      return new Promise((resolve, reject) => {
        const cbName = `_cb_${Date.now()}_${Math.random().toString(36).slice(2)}`;
        const script = document.createElement("script");

        const timer = setTimeout(() => {
          cleanup();
          reject(new Error("Timeout: la solicitud tardÃ³ demasiado."));
        }, JSONP_TIMEOUT);

        window[cbName] = function(data) {
          cleanup();
          resolve(data);
        };

        function cleanup() {
          clearTimeout(timer);
          delete window[cbName];
          if (script.parentNode) script.parentNode.removeChild(script);
        }

        script.onerror = () => {
          cleanup();
          reject(new Error("Error de red al cargar el script."));
        };

        script.src = `${GAS_URL}?type=${encodeURIComponent(type)}&callback=${cbName}&_=${Date.now()}`;
        document.head.appendChild(script);
      });
    }

    // â”€â”€ LOGIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    async function handleLogin(e) {
      e.preventDefault();
      const emailInput = document.getElementById("email").value.trim().toLowerCase();

      setAlert("login-alert", "", false);
      setAlert("login-info", "Conectando con la base de datosâ€¦");
      setLoginLoading(true);

      try {
        // 1. Cargar usuarios (si aÃºn no estÃ¡n en cachÃ©)
        if (allUsers.length === 0) {
          const res = await jsonp("users");
          if (!res.success) throw new Error(res.error || "Error al obtener usuarios.");
          allUsers = res.users || [];
        }

        // 2. Buscar email en columna CORREO
        const found = allUsers.find(u =>
          String(u["CORREO"] || "").trim().toLowerCase() === emailInput
        );

        if (!found) {
          setAlert("login-info", "", false);
          setAlert("login-alert", "âŒ Correo no encontrado. Verifica que estÃ©s registrado como alumno activo.");
          setLoginLoading(false);
          return;
        }

        currentUser = found;
        setAlert("login-info", "", false);

        // 3. Ir a la vista de carga y traer preguntas
        showView("view-loading");
        await loadQuestions();
        renderDashboard();
        showView("view-dashboard");

      } catch (err) {
        setAlert("login-info", "", false);
        setAlert("login-alert", `âš ï¸ ${err.message}`);
        setLoginLoading(false);
      }
    }

    // â”€â”€ CARGA DE PREGUNTAS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    async function loadQuestions() {
      document.getElementById("loading-text").textContent = "Cargando banco de preguntasâ€¦";
      const res = await jsonp("questions");
      if (!res.success) throw new Error(res.error || "Error al obtener preguntas.");
      allQuestions = res.questions || [];
    }

    // â”€â”€ RENDER DASHBOARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function renderDashboard() {
      // Nombre del usuario (busca columnas comunes)
      const nombreKey = Object.keys(currentUser).find(k =>
        ["NOMBRE", "NOMBRE COMPLETO", "NOMBRES", "ALUMNO"].includes(k.toUpperCase())
      );
      const nombre = nombreKey ? currentUser[nombreKey] : currentUser["CORREO"] || "Alumno";

      document.getElementById("user-name").textContent = nombre;
      document.getElementById("user-email-display").textContent = currentUser["CORREO"] || "";

      document.getElementById("stat-questions").textContent = allQuestions.length;
      document.getElementById("stat-users").textContent     = allUsers.length;

      // Tabla de preguntas
      const preview  = allQuestions.slice(0, MAX_PREVIEW_ROWS);
      const headers  = allQuestions.length > 0 ? Object.keys(allQuestions[0]) : [];

      const thead = document.getElementById("questions-head");
      const tbody = document.getElementById("questions-body");
      thead.innerHTML = "";
      tbody.innerHTML = "";

      if (headers.length === 0) {
        tbody.innerHTML = `<tr><td colspan="3" style="text-align:center;color:var(--text-muted);padding:28px">Sin preguntas disponibles.</td></tr>`;
        return;
      }

      // Cabecera
      headers.slice(0, 6).forEach(h => {
        const th = document.createElement("th");
        th.textContent = h;
        thead.appendChild(th);
      });

      // Filas
      preview.forEach((q, idx) => {
        const tr = document.createElement("tr");
        headers.slice(0, 6).forEach((h, i) => {
          const td   = document.createElement("td");
          const val  = q[h] !== undefined && q[h] !== "" ? q[h] : "â€”";
          if (i === 0) {
            td.innerHTML = `<span class="badge">${idx + 1}</span>`;
          } else {
            td.textContent = String(val).length > 80 ? String(val).slice(0, 80) + "â€¦" : val;
          }
          tr.appendChild(td);
        });
        tbody.appendChild(tr);
      });

      if (allQuestions.length > MAX_PREVIEW_ROWS) {
        const tr = document.createElement("tr");
        const td = document.createElement("td");
        td.colSpan = 6;
        td.style.cssText = "text-align:center;color:var(--text-muted);padding:14px;font-size:13px";
        td.textContent = `â€¦ y ${allQuestions.length - MAX_PREVIEW_ROWS} preguntas mÃ¡s en la base de datos.`;
        tr.appendChild(td);
        tbody.appendChild(tr);
      }
    }

    // â”€â”€ LOGOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function logout() {
      currentUser  = null;
      allUsers     = [];
      allQuestions = [];
      document.getElementById("email").value = "";
      setLoginLoading(false);
      setAlert("login-alert", "", false);
      setAlert("login-info",  "", false);
      showView("view-login");
    }
  </script>
</body>
</html>
